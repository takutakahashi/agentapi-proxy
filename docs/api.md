# API仕様書

## 概要
このAPIは、セッションごとに `agentapi` を起動し、各セッションに対して個別にリクエストを処理します。

## エンドポイント一覧

### POST /start
- 新しいセッションを作成します。
- レスポンスとして、作成されたセッションIDを返します。
- 各セッションごとに `agentapi` が新規に起動されます。

### /session_id/*
- すべての `/session_id/*` へのリクエストは、該当セッションの `agentapi` へ転送されます。
- セッションIDごとに独立した `agentapi` が動作しています。

### GET /search
- 既存のセッション一覧を検索・取得します。
- クエリパラメータでフィルタリングが可能です。
- 全体のセッション情報を取得するためのエンドポイントです。
- レスポンスはJSON形式で、セッションのリストを返します。

#### リクエスト例
```
GET /search?user_id=123&status=active
```

#### レスポンス例
```json
{
  "sessions": [
    { "session_id": "abc123", "user_id": "123", "status": "active" },
    { "session_id": "def456", "user_id": "123", "status": "active" }
  ]
}
```

## フロー
1. クライアントは `POST /start` で新しいセッションを作成します。
2. サーバーは新しいセッションIDを発行し、対応する `agentapi` を起動します。
3. クライアントは `/session_id/*` 形式のエンドポイントにリクエストを送信し、個別の `agentapi` とやりとりします。
